# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type ExerciseEntity {
  id: ID!
  title: String!
  description: String!
  objective: String
  difficulty: ExerciseDifficulty!
  videoUrl: String
  imageUrl: String
  schoolId: String!
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""Nivel de dificultad del ejercicio"""
enum ExerciseDifficulty {
  BASIC
  INTERMEDIATE
  ADVANCED
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type SessionExerciseEntity {
  id: ID!

  """Duraci贸n en minutos para esta sesi贸n espec铆fica"""
  durationMinutes: Int!

  """Orden de ejecuci贸n en la sesi贸n (1, 2, 3...)"""
  orderIndex: Int!
  specificNotes: String
  exercise: ExerciseEntity!
}

type NextEvent {
  id: ID!
  title: String!
  date: DateTime!
  type: EventType!
  location: String
  isCitado: Boolean!
}

"""Tipo de evento pr贸ximo: Partido o Entrenamiento"""
enum EventType {
  MATCH
  TRAINING
}

type PlayerStats {
  attendanceRate: Float!
  lastAttendance: DateTime
}

type PlayerFinancialStatus {
  status: PaymentStatus!
  debtAmount: Float!
  lastPaymentDate: DateTime
}

"""Estado del pago de la mensualidad"""
enum PaymentStatus {
  PENDING
  PAID
  OVERDUE
  WAIVED
}

type PlayerEntity {
  id: String!
  firstName: String!
  lastName: String!
  birthDate: DateTime!
  photoUrl: String
  medicalInfo: String
  active: Boolean!
  scholarship: Boolean!
  qrCodeToken: String!
  categoryId: ID!
  school: SchoolEntity
  schoolId: ID!
  category: CategoryEntity
  guardian: UserEntity
  guardianId: String!
  stats: PlayerStats
  financialStatus: PlayerFinancialStatus
  nextEvent: NextEvent
}

type AttendanceEntity {
  id: ID!
  status: AttendanceStatus!
  notes: String
  createdAt: DateTime!
  player: PlayerEntity!
  session: TrainingSessionEntity!
}

"""Estado de asistencia del jugador (PRESENT, ABSENT, LATE, EXCUSED)"""
enum AttendanceStatus {
  PRESENT
  ABSENT
  LATE
  EXCUSED
  PENDING
}

type TrainingSessionEntity {
  id: ID!
  date: DateTime!
  notes: String
  categoryId: ID!
  category: CategoryEntity!
  exercises: [SessionExerciseEntity!]
  attendance: [AttendanceEntity!]
}

type MatchStatEntity {
  id: ID!
  goals: Int!
  assists: Int!
  matchId: String!
  playerId: String!
  match: MatchEntity!
  player: PlayerEntity!
}

type MatchEntity {
  id: ID!
  rivalName: String!
  date: DateTime!
  isHome: Boolean!
  location: String
  categoryId: String!
  notes: String
  category: CategoryEntity!
  stats: [MatchStatEntity!]
}

type CategoryEntity {
  id: ID!
  name: String!
  type: CategoryType!
  players: [PlayerEntity!]!
  schoolId: String!
  sessions: [TrainingSessionEntity!]
  matches: [MatchEntity!]
}

"""Tipo de categor铆a: FORMATIVA o SELECTIVA"""
enum CategoryType {
  FORMATIVA
  SELECTIVA
}

type CoachEntity {
  id: ID!
  userId: String!
  user: UserEntity!
  bio: String
  categories: [CategoryEntity!]
}

type UserEntity {
  id: ID!
  email: String!
  fullName: String!
  phone: String
  role: UserRole!
  isActive: Boolean!
  schoolId: ID
  school: SchoolEntity
  schools: [SchoolStaff!]
  createdAt: DateTime!
  updatedAt: DateTime!
  coachProfile: CoachEntity
  managedPlayers: [PlayerEntity!]
}

enum UserRole {
  SUPERADMIN
  DIRECTOR
  COACH
  GUARDIAN
}

"""Beneficio o subvenci贸n municipal (Solo Modo Institucional)"""
type Benefit {
  id: ID!

  """T铆tulo del beneficio (ej: Gratuidad Junaeb)"""
  title: String!

  """Descripci贸n o requisitos (ej: 80% asistencia)"""
  description: String!
  active: Boolean!
  schoolId: String!
}

type CountSchool {
  players: Int!
  categories: Int!
  coaches: Int!
  guardians: Int!
}

type SchoolEntity {
  id: ID!

  """Nombre oficial de la escuela"""
  name: String!

  """Identificador 煤nico para la URL"""
  slug: String!
  mode: SchoolMode!
  planType: PlanType!
  subscriptionStatus: String!
  logoUrl: String

  """Datos bancarios para transferencias"""
  bankDetails: String
  createdAt: DateTime!
  updatedAt: DateTime!

  """Lista de beneficios (Solo Modo Institucional)"""
  benefits: [Benefit!]
  _count: CountSchool!

  """Uso de cuotas del plan (Guardrails)"""
  resourceUsage: ResourceUsage!
}

enum SchoolMode {
  COMMERCIAL
  INSTITUTIONAL
}

enum PlanType {
  SEMILLERO
  PROFESIONAL
  ALTO_RENDIMIENTO
  GOLD_NETWORK
}

type SchoolStaff {
  id: ID!
  user: UserEntity!
  school: SchoolEntity!
  role: SchoolRole!
  createdAt: DateTime!
}

"""Rol del usuario dentro de una escuela"""
enum SchoolRole {
  DIRECTOR
  COACH
  STAFF
}

"""Estado actual de uso de recursos vs L铆mites del Plan"""
type ResourceUsage {
  currentPlayers: Int!
  maxPlayers: Int!
  currentCategories: Int!
  maxCategories: Int!
  canAddPlayer: Boolean!
  canAddCategory: Boolean!
}

type MonthlyFeeEntity {
  id: ID!
  amount: Float!
  dueDate: DateTime!
  paymentDate: DateTime
  status: PaymentStatus!
  paymentMethod: String
  month: Int!
  year: Int!
  schoolId: String!
  player: PlayerEntity!
}

type FinanceSummary {
  totalCollected: Float!
  totalPending: Float!
  totalOverdue: Float!
  expectedTotal: Float!
  collectionRate: Float!
}

type ProductEntity {
  id: ID!
  name: String!
  description: String
  price: Float!

  """Cantidad disponible en inventario"""
  stock: Int!
  imageUrl: String
  active: Boolean!
  schoolId: ID!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type AuthResponse {
  """Token JWT para acceder a los endpoints protegidos"""
  accessToken: String!

  """Datos del usuario autenticado"""
  user: UserEntity!
}

"""Registro de una invitaci贸n entre directores"""
type Referral {
  id: ID!

  """ID de la escuela que envi贸 la invitaci贸n"""
  referrerSchoolId: String!

  """La escuela que invit贸 (Director A)"""
  referrerSchool: SchoolEntity!

  """Email invitado"""
  referredSchoolEmail: String!

  """ID de la escuela creada (si ya acept贸)"""
  referredSchoolId: String

  """La escuela nueva (Director B) si ya existe"""
  referredSchool: SchoolEntity
  status: ReferralStatus!

  """Si el Director A ya recibi贸 su mes gratis"""
  rewardClaimed: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
}

"""Estado de la invitaci贸n de referido"""
enum ReferralStatus {
  PENDING
  CONVERTED
  REJECTED
}

"""Banner publicitario local (Sponsor)"""
type Sponsorship {
  id: ID!

  """Nombre del cliente (ej: Dentista San Jos茅)"""
  name: String!

  """URL de la imagen del banner"""
  imageUrl: String!

  """Link de redirecci贸n al hacer clic"""
  redirectUrl: String

  """Ubicaci贸n en la app (ej: APP_HOME, LOADING)"""
  location: String!
  isActive: Boolean!
  startDate: DateTime!
  endDate: DateTime!
  schoolId: String!
}

"""Protocolo estandarizado de evaluaci贸n f铆sica/t茅cnica"""
type TestProtocol {
  id: ID!

  """Nombre del test (Ej: Yo-Yo Recovery L1)"""
  name: String!

  """Instrucciones de ejecuci贸n"""
  description: String!

  """Unidad de medida (cm, seg, repeticiones)"""
  unit: String!

  """Si es visible para todas las escuelas"""
  isGlobal: Boolean!

  """JSON String con tablas de baremos (edad vs nota)"""
  baremoJson: String
}

"""Pizarra t谩ctica digital guardada por un entrenador"""
type TacticalBoard {
  id: ID!
  title: String!

  """JSON String con las coordenadas de jugadores y l铆neas"""
  configurationJson: String!

  """Imagen de fondo (URL o tipo de cancha)"""
  backgroundImage: String
  coachId: String!

  """ID de la sesi贸n asociada (si aplica)"""
  sessionId: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Strategy {
  id: String!
  title: String!
  description: String
  tokens: JSON!
  drawingData: String
  createdAt: DateTime!
  updatedAt: DateTime!
  coachId: String!
  coach: UserEntity!
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON

type Query {
  schools(mode: SchoolMode): [SchoolEntity!]!
  schoolsByDirector: [SchoolEntity!]!
  schoolById(schoolId: ID!): SchoolEntity!
  schoolBySlug(slug: String!): SchoolEntity!
  mySchool: SchoolEntity!
  guardiansBySchool(schoolId: String): [UserEntity!]!
  usersByRole(role: UserRole!, schoolId: String!): [UserEntity!]!
  users: [UserEntity!]!
  meGuardian: UserEntity!
  meCoach: UserEntity!
  getMyPlayersCarnet: UserEntity!

  """Retorna el usuario actualmente autenticado (Perfil)"""
  me: UserEntity!
  userById(userId: ID!): UserEntity!
  coaches(schoolId: ID): [UserEntity!]!
  guardians(schoolId: ID): [UserEntity!]!
  playersBySchool(schoolId: String): [PlayerEntity!]!
  playersByCategory(categoryId: String!): [PlayerEntity!]!
  playersByGuardian(guardianId: String!): [PlayerEntity!]!
  playerProfile(playerId: String!): PlayerEntity!
  scanQrPlayer(qrCodeToken: String!): PlayerEntity!
  trainingSessionsByCategory(categoryId: ID!): [TrainingSessionEntity!]!
  trainingSession(sessionId: ID!): TrainingSessionEntity!
  financeSummary(schoolId: ID!, month: Int!, year: Int!): FinanceSummary!
  monthlyFees(schoolId: ID!, month: Int!, year: Int!, status: PaymentStatus): [MonthlyFeeEntity!]!
  productsBySchool: [ProductEntity!]!
  activeProducts: [ProductEntity!]!
  product(productId: ID!): ProductEntity!
  myReferrals: [Referral!]!
  activeBanners(location: String!): [Sponsorship!]!
  allSponsorships: [Sponsorship!]!

  """Lista de tests estandarizados globales"""
  globalTestProtocols: [TestProtocol!]!

  """Pizarras creadas por el usuario actual"""
  myTacticalBoards: [TacticalBoard!]!
  categories(schoolId: String): [CategoryEntity!]!
  category(id: String!): CategoryEntity!
  myStrategies: [Strategy!]!
  strategy(id: String!): Strategy!
  matches: [MatchEntity!]!
  matchesByCategory(categoryId: ID!): [MatchEntity!]!
  match(id: ID!): MatchEntity!
  mySchoolExercises(schoolId: String!): [ExerciseEntity!]!
}

type Mutation {
  createSchool(input: CreateSchoolInput!): SchoolEntity!
  updateSchool(schoolId: ID!, input: UpdateSchoolInput!): SchoolEntity!
  switchSchoolMode(schoolId: ID!, mode: SchoolMode!): SchoolEntity!
  updateSchoolPlan(schoolId: ID!, plan: PlanType!): SchoolEntity!
  deactivateSchool(schoolId: ID!): SchoolEntity!
  createBenefit(input: CreateBenefitInput!): Benefit!
  deleteBenefit(id: ID!): Benefit!
  createUser(input: CreateUserInput!): UserEntity!
  createCoach(input: CreateUserInput!): UserEntity!
  updateUser(userId: String!, input: UpdateUserInput!): UserEntity!
  deactivateUser(userId: String!): Boolean!
  createGuardian(input: CreateUserInput!): UserEntity!
  assignCategoriesToCoach(userId: String!, categoryIds: [String!]!): CoachEntity!
  createPlayer(input: CreatePlayerInput!): PlayerEntity!
  updatePlayer(playerId: String!, input: UpdatePlayerInput!): PlayerEntity!
  togglePlayerActive(playerId: String!): PlayerEntity!
  registerAttendance(sessionId: String!, playerId: String!, status: String!): AttendanceEntity!
  createTrainingSession(input: CreateTrainingSessionInput!): TrainingSessionEntity!
  updateTrainingSession(sessionId: ID!, input: UpdateTrainingSessionInput!): TrainingSessionEntity!
  removeTrainingSession(sessionId: ID!): Boolean!
  markFeeAsPaid(input: MarkFeeAsPaidInput!): MonthlyFeeEntity!
  createProduct(input: CreateProductInput!): ProductEntity!
  updateProduct(productId: ID!, input: UpdateProductInput!): ProductEntity!
  removeProduct(productId: ID!): ProductEntity!

  """Inicio de sesi贸n unificado (Director, Coach, Admin)"""
  login(input: LoginInput!): AuthResponse!

  """Registro de nueva cuenta (Generalmente para Directores)"""
  register(input: RegisterInput!): AuthResponse!

  """ GOD MODE: SuperAdmin inicia sesi贸n como otro usuario"""
  impersonateUser(targetUserId: String!): AuthResponse!

  """Actualiza el paso del wizard de onboarding"""
  updateOnboardingStep(input: OnboardingStepInput!): Boolean!
  sendInvite(email: String!): Referral!
  createSponsorship(input: CreateSponsorshipInput!): Sponsorship!
  createTestProtocol(input: CreateTestProtocolInput!): TestProtocol!
  saveTacticalBoard(input: CreateTacticalBoardInput!): TacticalBoard!
  updateTacticalBoard(input: UpdateTacticalBoardInput!): TacticalBoard!
  deleteTacticalBoard(id: ID!): TacticalBoard!
  createCategory(input: CreateCategoryInput!): CategoryEntity!
  updateCategory(id: String!, input: UpdateCategoryInput!): CategoryEntity!
  removeCategory(id: String!): CategoryEntity!
  createStrategy(createStrategyInput: CreateStrategyInput!): Strategy!
  updateStrategy(updateStrategyInput: UpdateStrategyInput!): Strategy!
  removeStrategy(id: String!): Strategy!
  createMatch(input: CreateMatchInput!): MatchEntity!
  updateMatch(input: UpdateMatchInput!): MatchEntity!
  removeMatch(id: ID!): MatchEntity!
  createExercise(schoolId: String!, input: CreateExerciseInput!): ExerciseEntity!
  removeExercise(id: String!): Boolean!
}

input CreateSchoolInput {
  name: String!

  """Sin espacios, solo letras, n煤meros y guiones"""
  slug: String!
  mode: SchoolMode = COMMERCIAL
  subscriptionStatus: String!
  planType: PlanType = SEMILLERO
}

input UpdateSchoolInput {
  name: String

  """Sin espacios, solo letras, n煤meros y guiones"""
  slug: String
  mode: SchoolMode = COMMERCIAL
  subscriptionStatus: String
  planType: PlanType = SEMILLERO
  bankDetails: String
  logoUrl: String
}

"""Input para crear un beneficio (Modo Institucional)"""
input CreateBenefitInput {
  title: String!
  description: String!
}

input CreateUserInput {
  email: String!

  """M铆nimo 6 caracteres"""
  password: String!
  fullName: String!
  role: UserRole! = GUARDIAN
  phone: String
  schoolId: ID
}

input UpdateUserInput {
  email: String

  """M铆nimo 6 caracteres"""
  password: String
  fullName: String
  role: UserRole = GUARDIAN
  phone: String
  schoolId: ID
  isActive: Boolean
}

input CreatePlayerInput {
  firstName: String!
  lastName: String!
  birthDate: DateTime!
  photoUrl: String
  medicalInfo: String
  scholarship: Boolean = false
  schoolId: ID!
  categoryId: ID!
  guardianId: ID!
}

input UpdatePlayerInput {
  firstName: String
  lastName: String
  birthDate: DateTime
  photoUrl: String
  medicalInfo: String
  scholarship: Boolean = false
  schoolId: ID
  categoryId: ID
  guardianId: ID
  active: Boolean
}

input CreateTrainingSessionInput {
  title: String!
  location: String!
  date: DateTime!
  notes: String
  categoryId: ID!

  """IDs de los ejercicios"""
  exerciseIds: [ID!]
}

input UpdateTrainingSessionInput {
  title: String
  location: String
  date: DateTime
  notes: String
  categoryId: ID

  """IDs de los ejercicios"""
  exerciseIds: [ID!]
}

input MarkFeeAsPaidInput {
  feeId: ID!
  paymentMethod: PaymentMethod!
}

enum PaymentMethod {
  CASH
  TRANSFER
  DEBIT
  CREDIT
}

input CreateProductInput {
  name: String!
  description: String
  price: Float!
  stock: Int!
  imageUrl: String
  schoolId: ID!
}

input UpdateProductInput {
  name: String
  description: String
  price: Float
  stock: Int
  imageUrl: String
  schoolId: ID
  active: Boolean
}

input LoginInput {
  email: String!
  password: String!
}

input RegisterInput {
  email: String!
  password: String!
  fullName: String!
  phone: String
}

input OnboardingStepInput {
  """El paso del wizard que acaba de completar (1-4)"""
  step: Int!
}

"""Datos para crear un nuevo patrocinio"""
input CreateSponsorshipInput {
  name: String!
  imageUrl: String!
  redirectUrl: String

  """Ej: APP_BOTTOM_BANNER"""
  location: String!
  startDate: DateTime!
  endDate: DateTime!
}

"""Datos para crear un nuevo protocolo de test"""
input CreateTestProtocolInput {
  name: String!
  description: String!
  unit: String!
  baremoJson: String
}

"""Datos para guardar una pizarra t谩ctica"""
input CreateTacticalBoardInput {
  title: String!

  """JSON stringificado con el estado del canvas"""
  configurationJson: String!
  backgroundImage: String

  """Opcional: vincular a una sesi贸n de entrenamiento"""
  sessionId: String
}

"""Datos para actualizar una pizarra existente"""
input UpdateTacticalBoardInput {
  id: ID!
  title: String
  configurationJson: String
}

input CreateCategoryInput {
  name: String!
  type: CategoryType! = FORMATIVA
  schoolId: String!
}

input UpdateCategoryInput {
  name: String
  type: CategoryType
}

input CreateStrategyInput {
  title: String!
  description: String
  tokens: JSON!
  drawingData: String
}

input UpdateStrategyInput {
  title: String
  description: String
  tokens: JSON
  drawingData: String
  id: String!
}

input CreateMatchInput {
  date: DateTime!
  rivalName: String!
  isHome: Boolean! = true
  location: String
  notes: String

  """Estado inicial del partido (SCHEDULED, PLAYED, etc)"""
  status: String
  categoryId: ID!
}

input UpdateMatchInput {
  date: DateTime
  rivalName: String
  isHome: Boolean = true
  location: String
  notes: String

  """Estado inicial del partido (SCHEDULED, PLAYED, etc)"""
  status: String
  categoryId: ID
  id: ID!
}

input CreateExerciseInput {
  title: String!
  description: String!
  objective: String
  difficulty: ExerciseDifficulty
  videoUrl: String
  imageUrl: String
}